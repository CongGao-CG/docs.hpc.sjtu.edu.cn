*********
计算系统
*********

计算系统包含 π 集群中所有的计算节点，提供给用户进行实际作业计算，包括高性能计算平台和人工智能计算平台。


高性能计算平台
==============

高性能计算平台原先由 656 台双路节点 x86 服务器组成，每台服务器配备 40 核（2.5GHz）、192G 内存（12通道 DDR4 2666），共计 26240 个 CPU 核、48T 内存。 双精度理论峰值性能达到了 2.1 PFLOPS，计算节点之间使用 100 Gbps 的 Intel OmniPath 互联，是国内高校和上海地区最快的超算之一。作业系统中调用的 cpu 队列、small 队列和 debug 队列都属于这 656 台服务器。

经过扩展和更新，高性能计算平台新增了 3 台大内存 x86 服务器 和 100 台 arm 架构的华为鲲鹏服务器。其中 2 台大内存服务器组成了 huge 队列，每台拥有 80 核、3T 内存（48 通道 DDR4 2666），共计 160 核、6T 内存。另外 1 台大内存服务器组成了 192c6t 队列，拥有 192 核、6T 内存（98 通道 DDR4 2666）。100台华为鲲鹏服务器组成了 π 集群中新的国产 arm 计算平台，命名为 arm128c256g 队列，每台服务器配备 128 核（2.6 GHz）、256G 内存（16通道 DDR4 2933），共计 12800 核、25T 内存，节点间采用 IfiniBand 高速网络互联。

因 x86 平台和 arm 平台 CPU 架构不同，计算应用和软件库都需要重新编译。

下面列出了高性能计算平台具体的硬件信息：

================  ======   ==================================================================   =======
队列               架构     参数                                                                 数量
================  ======   ==================================================================   =======
debug/small/cpu    x86     CPU: 2 x Intel Xeon Scalable Cascade Lake 6248(2.5GHz, 20 cores)      656
                           
                           Mem:12 x Samsung 16GB DDR4 ECC REG 2666
         
huge               x86     CPU: 4 x Intel Xeon Scalable SkyLake 6148(2.4GHz, 20 cores)           2
                           
                           Mem: 48 x Hynix 64GB DDR4 ECC REG 2666

192c6t             x86     CPU: 8 x Intel Xeon Platinum 8260(2.4GHz，24 cores)                   1
                  
                           Mem: 98 x Samsung 64GB DDR4 2666

arm128c256g        arm     CPU: 2 x HiSilicon Kunpeng 920-6426(2600MHz, 64cores)                 100
                           
                           Mem: 16 x Samsung 16GB DDR4 2933
================  ======   ==================================================================   =======


人工智能计算平台
================

人工智能计算平台由 8 台 NVIDIA DGX-2 服务器组成，DGX-2 是目前世界上计算能力最强的人工智能计算和科学计算服务器。每台 DGX-2 配置 16 块 Tesla V100 GPU 加速卡，2 颗 Intel 至强铂金 8168 CPU，1.5 TB DDR4 内存，30 TB NVMe SSD 和 512GB HBM2 显存。其双精度计算能力达到 1 PFLOPS（千万亿次），张量计算能力达到 16 PFLOPS。数据传输上，GPU 卡之间使用 NVSWITCH 交换芯片实现 NVLINK 高速无阻塞全互联，互连带宽达到 300 GB/s，每台 DGX-2 NVSWITCH 总数达到 12 个，提供 2.4 TB/s 半分带宽；8 台 NVIDIA DGX-2 服务器之间则使用 Mellanox 100 Gbps Infiniband EDR 全线速无阻塞交换机互联。

作业系统中调用的 dgx2 队列即为人工智能计算平台。

下面列出了人工智能计算平台具体的硬件信息：

======   ==================================================================   =======
队列      参数                                                                 数量
======   ==================================================================   =======
dgx2     CPU: 2 x Intel Xeon Scalable Cascade Lake 8168(2.7GHz，24 cores)      8
         
         Mem: 1.5 TB DDR4 ECC REG 2666
         
         GPU: 16 x NVIDIA Tesla V100
======   ==================================================================   =======
