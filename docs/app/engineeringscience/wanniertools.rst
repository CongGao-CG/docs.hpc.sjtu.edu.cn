.. _wanniertools:

WannierTools  
============

简介
-------
WannierTools, a software for investigation of novel topological materials. This code works in the tight-binding framework, which can be generated by another software package Wannier90. It can help to classify the topological phase of a given materials by calculating the Wilson loop, and can get the surface state spectrum which is detected by angle resolved photoemission (ARPES) and in scanning tunneling microscopy (STM) experiments . It also identifies positions of Weyl/Dirac points and nodal line structures, calculates the Berry phase around a closed momentum loop and Berry curvature in a part of the Brillouin zone(BZ). Besides, WannierTools also can calculate ordinary magnetoresistance for non-magnetic metal and semimetal using Boltzmann transport theory, calculate Landau level spectrum with given magnetic field direction and strength, and get unfolded energy spectrum from a supercell calculation.

在集群上安装WannierTools
--------------------------------------

以在Pi2.0集群安装为例

.. code:: console
    
    $ git clone https://github.com/quanshengwu/wannier_tools.git
    $ cd wannier_tools/src
    $ cp Makefile.intel-mpi Makefile
    $ srun -p cpu -n 8 --pty /bin/bash
    $ module load oneapi/2021.4.0
    $ module load arpack-ng/3.9.0-gcc-8.5.0-openblas


修改编译文件Makefile

.. code:: console
    
    $ ARPACK=-L/lustre/opt/cascadelake/linux-rhel8-skylake_avx512/gcc-8.5.0/arpack-ng-3.9.0-45jijdktw4kpjdk54loswx5tcjs5udez/lib64 -larpack

开始编译，完成后在wannier_tools/bin文件夹中生成可执行文件wt.x

.. code:: console
    
    $ make


提交WannierTools多核并行计算的脚本：
------------------------------------

.. code:: console

    #!/bin/bash
    #SBATCH -J hello-python
    #SBATCH -p cpu
    #SBATCH -o %j.out
    #SBATCH -e %j.err
    #SBATCH -N 1
    #SBATCH --ntasks-per-node=40

    module load oneapi/2021.4.0
    module load arpack-ng/3.9.0-gcc-8.5.0-openblas

    mpirun -np 40 wt.x &

参考资料
--------

-  `WannierTools github <https://github.com/quanshengwu/wannier_tools>`__